<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<title>Jogo de Carro 2D - Neon Carros Detalhados</title>
<style>
  body {
    margin: 0; 
    overflow: hidden; 
    background: #0f0f1e;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #0ff;
  }
  #hud {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 255, 255, 0.15);
    padding: 12px 28px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 22px;
    letter-spacing: 2px;
    text-shadow: 0 0 6px #0ff, 0 0 12px #0ff;
    user-select: none;
    z-index: 10;
  }
  #gameOver {
    display: none;
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.9);
    color: #0ff;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 32px;
    text-shadow: 0 0 10px #0ff;
    z-index: 20;
  }
  #gameOver button {
    margin-top: 25px;
    padding: 14px 30px;
    font-size: 20px;
    border: none;
    border-radius: 8px;
    background: #0ff;
    color: #020202;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s ease;
    box-shadow: 0 0 8px #0ff;
  }
  #gameOver button:hover {
    background: #00c6c6;
    box-shadow: 0 0 16px #00c6c6;
  }
  canvas {
    display: block;
    background: radial-gradient(circle at center, #1a1a40 0%, #000010 90%);
    filter: drop-shadow(0 0 3px #0ff);
  }
</style>
</head>
<body>
  <div id="hud">PONTUAÇÃO: <span id="score">0</span></div>
  <div id="gameOver">
    <div id="msg">COLIDIU!</div>
    <div>PONTUAÇÃO FINAL: <span id="finalScore">0</span></div>
    <button onclick="restart()">REINICIAR</button>
  </div>
  <canvas id="game"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const lanes = [canvas.width / 2 - 160, canvas.width / 2, canvas.width / 2 + 160];
    const car = { x: lanes[1], y: canvas.height - 160, w: 60, h: 110, lane: 1, targetX: lanes[1] };
    const obstacles = [];
    let score = 0, gameOver = false, speed = 6, spawnTimer = 0, roadOffset = 0;

    // Sons (adicione seus .mp3 na pasta do jogo)
    const motorSound = new Audio("motor.mp3");
    motorSound.loop = true;
    motorSound.volume = 0.35;

    const crashSound = new Audio("crash.mp3");
    crashSound.volume = 0.7;

    document.addEventListener("click", () => {
      if (!gameOver) motorSound.play();
    }, { once: true });

    // NOVA função para desenhar carros estilizados
    // Parâmetros: objeto carro com x, y, w, h e cor principal
    function drawCar(c, color = "#0ff") {
      ctx.save();
      ctx.translate(c.x, c.y);

      // Corpo principal
      ctx.fillStyle = color;
      ctx.shadowColor = color;
      ctx.shadowBlur = 16;
      ctx.beginPath();
      ctx.moveTo(-c.w / 2 + 10, 0);
      ctx.lineTo(c.w / 2 - 10, 0);
      ctx.lineTo(c.w / 2 - 20, c.h * 0.6);
      ctx.lineTo(-c.w / 2 + 20, c.h * 0.6);
      ctx.closePath();
      ctx.fill();

      // Capô
      ctx.fillStyle = lightenColor(color, 40);
      ctx.shadowColor = lightenColor(color, 40);
      ctx.shadowBlur = 12;
      ctx.fillRect(-c.w / 2 + 15, 0, c.w - 30, c.h * 0.25);
      ctx.shadowBlur = 0;

      // Janelas
      ctx.fillStyle = "#002244cc";
      ctx.shadowColor = "#002244cc";
      ctx.shadowBlur = 10;
      ctx.fillRect(-c.w / 4, c.h * 0.05, c.w / 2, c.h * 0.25);
      ctx.shadowBlur = 0;

      // Rodas
      const wheelRadius = 12;
      ctx.fillStyle = "#222222";
      ctx.shadowColor = "#000000";
      ctx.shadowBlur = 5;
      // Roda traseira esquerda
      ctx.beginPath();
      ctx.ellipse(-c.w / 3, c.h * 0.85, wheelRadius, wheelRadius * 0.6, 0, 0, Math.PI * 2);
      ctx.fill();
      // Roda traseira direita
      ctx.beginPath();
      ctx.ellipse(c.w / 3, c.h * 0.85, wheelRadius, wheelRadius * 0.6, 0, 0, Math.PI * 2);
      ctx.fill();

      // Neon contorno carro
      ctx.lineWidth = 3;
      ctx.strokeStyle = color;
      ctx.shadowColor = color;
      ctx.shadowBlur = 16;
      ctx.beginPath();
      ctx.moveTo(-c.w / 2 + 10, 0);
      ctx.lineTo(c.w / 2 - 10, 0);
      ctx.lineTo(c.w / 2 - 20, c.h * 0.6);
      ctx.lineTo(-c.w / 2 + 20, c.h * 0.6);
      ctx.closePath();
      ctx.stroke();

      ctx.restore();
    }

    // Função para clarear cores, recebe cor hex e valor de clareamento (0-255)
    function lightenColor(hex, amt) {
      let usePound = false;
      if (hex[0] == "#") {
        hex = hex.slice(1);
        usePound = true;
      }
      let num = parseInt(hex, 16);
      let r = (num >> 16) + amt;
      if (r > 255) r = 255;
      else if (r < 0) r = 0;
      let g = ((num >> 8) & 0x00FF) + amt;
      if (g > 255) g = 255;
      else if (g < 0) g = 0;
      let b = (num & 0x0000FF) + amt;
      if (b > 255) b = 255;
      else if (b < 0) b = 0;
      return (usePound ? "#" : "") + (r.toString(16).padStart(2, '0')) + (g.toString(16).padStart(2, '0')) + (b.toString(16).padStart(2, '0'));
    }

    function updateObstacles() {
      obstacles.forEach((o, i) => {
        o.y += speed;
        if (o.y > canvas.height) {
          obstacles.splice(i, 1);
          score += 10;
          document.getElementById("score").textContent = score;
        }
        if (o.y + o.h > car.y && o.y < car.y + car.h && Math.abs(o.x - car.x) < (o.w / 2 + car.w / 2)) {
          crashSound.play();
          endGame();
        }
      });
    }

    function spawnObstacle() {
      const lane = Math.floor(Math.random() * 3);
      // cores neon diferentes para os obstáculos
      const colors = ["#ff0040", "#00f0ff", "#ff6f00", "#ff00ff", "#00ff9f"];
      obstacles.push({ x: lanes[lane], y: -120, w: 60, h: 110, color: colors[Math.floor(Math.random() * colors.length)] });
    }

    function drawRoad() {
      const roadWidth = 520;
      ctx.fillStyle = "#111f33";
      ctx.shadowColor = "#0ff";
      ctx.shadowBlur = 14;
      ctx.fillRect(canvas.width / 2 - roadWidth / 2, 0, roadWidth, canvas.height);
      ctx.shadowBlur = 0;

      ctx.strokeStyle = "#0ff";
      ctx.lineWidth = 6;
      ctx.shadowColor = "#0ff";
      ctx.shadowBlur = 20;
      ctx.beginPath();
      ctx.moveTo(canvas.width / 2 - 160, 0);
      ctx.lineTo(canvas.width / 2 - 160, canvas.height);
      ctx.moveTo(canvas.width / 2 + 160, 0);
      ctx.lineTo(canvas.width / 2 + 160, canvas.height);
      ctx.stroke();
      ctx.shadowBlur = 0;

      ctx.strokeStyle = "#00ffff";
      ctx.lineWidth = 8;
      ctx.setLineDash([50, 50]);
      ctx.lineDashOffset = -roadOffset;
      ctx.beginPath();
      ctx.moveTo(canvas.width / 2, 0);
      ctx.lineTo(canvas.width / 2, canvas.height);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    function loop() {
      if (gameOver) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drawRoad();
      car.x += (car.targetX - car.x) * 0.22;
      drawCar(car);
      obstacles.forEach(o => drawCar(o, o.color));
      updateObstacles();

      spawnTimer++;
      if (spawnTimer > 65) {
        spawnObstacle();
        spawnTimer = 0;
      }

      roadOffset += speed;
      if (roadOffset > 100) roadOffset = 0;

      requestAnimationFrame(loop);
    }

    function endGame() {
      gameOver = true;
      motorSound.pause();
      document.getElementById("finalScore").textContent = score;
      document.getElementById("gameOver").style.display = "flex";
    }

    window.restart = function () {
      obstacles.length = 0;
      car.lane = 1; car.x = lanes[1]; car.targetX = lanes[1];
      score = 0; speed = 6;
      document.getElementById("score").textContent = score;
      gameOver = false;
      document.getElementById("gameOver").style.display = "none";
      motorSound.play();
      loop();
    }

    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft" || e.key === "a") { if (car.lane > 0) car.lane--; }
      if (e.key === "ArrowRight" || e.key === "d") { if (car.lane < 2) car.lane++; }
      car.targetX = lanes[car.lane];
    });

    setInterval(() => { if (!gameOver && speed < 20) speed += 0.4; }, 5000);

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    loop();
  </script>
</body>
</html>
